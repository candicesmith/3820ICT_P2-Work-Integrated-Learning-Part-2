{% extends "page/base.html" %}
{% block content %}
<html>
    <!-- SIDEBAR -->
  <div class="d-none d-md-flex custom-background clientinfo-style p-0" style="min-width: 300px; max-width: 300px;">
    <div class="d-flex flex-column align-items-stretch flex-grow-1 bg-white p-0 ">
      
      <!-- SIDEBAR: HEADER -->
      <a class="d-flex align-items-center btn btn_back p-0 m-2" href="{% url 'client' client.id %}">
        <img src="/media/images/arrow_left_short.svg" alt="" width="42" height="42" fill="currentColor" class="d-inline-block">
        <span class="navigation-bar-style">Back</span>
      </a>
      
      <div class="border-bottom"></div>

      <!-- SIDEBAR: CONTENT -->
      <div class="list-group list-group-flush scrollarea p-3 m-0 flex-grow-1">
        <ul class="list-unstyled p-0 m-0">
            <div class="p-2">
                <h3 class="article-content"> {{ client.first_name }} {{ client.last_name }}</h3>
                <h5 class="article-content mt-3">Video Title:</h5>
                <div class="row mb-1">"{{ video.title }}"</div>
                <h5 class="article-content mt-3">Uploaded:</h5>
                <div class="row mb-1">{{ video.date_uploaded }}</div>
            </div>
        </ul>
      </div>
    </div>
  </div>


  <!-- TABLE -->
<!-- Client Analyses & Videos -->
<div class="d-flex flex-grow-1 p-md-3 m-0 mw-100">
    <div class="d-flex flex-column align-items-stretch flex-grow-1 mw-100 custom-background ">
   
    <!-- CONTENT -->
    <div class="list-group list-group-flush scrollarea p-0 m-0 flex-grow-1">
        <div class="list-group list-group-flush scrollarea mh-100 mw-100">
            <video class="d-flex flex-column mh-100 mw-100" controls>
                <source src="{{video.skeleton_video.url}}" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
                <b>{{video.title}}</b>
            </video>
        </div>
    </div>
  </div>
</div>

<script>
    $(document).ready(function() {
        // Gets the video src from the data-src on each button
        var $videoSrc;  
        $('.video-btn').click(function() {
            $videoSrc = $(this).data( "src" );
        });
        console.log($videoSrc);

        // when the modal is opened autoplay it  
        $('#myModal').on('shown.bs.modal', function (e) {
            // set the video src to autoplay and not to show related video. Youtube related video is like a box of chocolates... you never know what you're gonna get
            $("#video").attr('src',$videoSrc + "?autoplay=1&amp;modestbranding=1&amp;showinfo=0" ); 
        })

        // stop playing the youtube video when I close the modal
        $('#myModal').on('hide.bs.modal', function (e) {
            // a poor man's stop video
            $("#video").attr('src', $videoSrc); 
        }) 
        // document ready  
    });
</script>
</html>
{% endblock content%}