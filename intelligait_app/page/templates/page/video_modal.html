{% extends "page/base.html" %}
{% block content %}
<html>    
  
</div>
    <div class="d-flex h-100">
        <div class="d-flex align-items-end flex-column custom-background clientinfo-style p-2" style="min-width:250px;">
            <div class="w-100">

                <div class="w-100 mt-auto btn_wide">
                    <a class="btn navigation-bar-style d-flex align-items-center pl-2 btn_wide" href="{% url 'client' client.id %}">
                        <i class="bi bi-arrow-left"></i>
                    </a>
                </div>

                <div class="p-2">
                    <img class="rounded-circle account-img" src="{{ client.image.url }}">
                    <h3 class="article-content"> {{ client.first_name }} {{ client.last_name }}</h3>
                    <small class="text-muted">Created: {{ client.creation_date }}</small><br>
                    <small class="text-muted">Last Updated: {{ client.last_updated }}</small><br><br>
                    <h5 class="article-content mt-3">Video Title:</h5>
                    <div class="row mb-1">"{{ video.title }}"</div>
                    <h5 class="article-content mt-3">Uploaded:</h5>
                    <div class="row mb-1">{{ video.date_uploaded }}</div>
                </div>
            </div>

            <div class="w-100 mt-auto">
                <a class="btn btn_custom btn_update_1 w-100 mt-2" href="{% url 'update-client' client.id %}">Update Client</a>
                <a class="btn btn_custom btn_delete w-100 mt-2" href="{% url 'delete-client' client.id %}">Delete Client</a>
            </div>
        </div>

        <article class="m-0 w-100 d-flex pt-3">
            <article class="col-lg-12">
                <div class="custom-background padding_3 row align-top">

                    <video class="video" controls>
                        <source src="{{video.video.url}}" type="video/mp4">
                        <b>{{video.title}}</b>
                    </video>

                </div>
            </article>
        </article>
    </div>

    <script>
        $(document).ready(function() {
            // Gets the video src from the data-src on each button
            var $videoSrc;  
            $('.video-btn').click(function() {
                $videoSrc = $(this).data( "src" );
            });
            console.log($videoSrc);

            // when the modal is opened autoplay it  
            $('#myModal').on('shown.bs.modal', function (e) {
                // set the video src to autoplay and not to show related video. Youtube related video is like a box of chocolates... you never know what you're gonna get
                $("#video").attr('src',$videoSrc + "?autoplay=1&amp;modestbranding=1&amp;showinfo=0" ); 
            })

            // stop playing the youtube video when I close the modal
            $('#myModal').on('hide.bs.modal', function (e) {
                // a poor man's stop video
                $("#video").attr('src', $videoSrc); 
            }) 
            // document ready  
        });
    </script>
</html>
{% endblock content%}